<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKIM.PRO ‚Äî Smart Calc</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: sans-serif; background: #050505; color: white; padding-bottom: 120px; }
        .category-btn { background: #111; border: 1px solid #222; }
        .hidden-content { display: none; }
        .active-content { display: block; }
        input[type="number"] { background: #1a1a1a; border: 1px solid #333; color: #3b82f6; width: 60px; text-align: center; border-radius: 8px; }
    </style>
</head>
<body class="p-4">
    <div class="max-w-md mx-auto">
        <h1 class="text-xl font-black text-blue-500 mb-6 uppercase italic">–°–∏—Å—Ç–µ–º–Ω—ã–π —Ä–∞—Å—á–µ—Ç</h1>
        
        <div id="calculator-container"></div>

        <button onclick="sendToWhatsApp()" class="w-full bg-green-600 p-4 rounded-2xl font-bold uppercase mt-6">
            <i class="fab fa-whatsapp mr-2"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–º–µ—Ç—É
        </button>
    </div>

    <div class="fixed bottom-0 left-0 right-0 p-6 bg-blue-600 flex justify-between items-center rounded-t-3xl">
        <div>
            <p class="text-xs uppercase opacity-80">–ò—Ç–æ–≥–æ:</p>
            <div class="text-3xl font-black"><span id="total">0</span> —Å–æ–º</div>
        </div>
    </div>

    <script src="data/prices.js"></script>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –∏–∑ —Ñ–∞–π–ª–∞ prices.js
        function renderCalc() {
            const container = document.getElementById('calculator-container');
            if (typeof serviceCategories === 'undefined') {
                container.innerHTML = "<p class='text-red-500 text-center'>–û—à–∏–±–∫–∞: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ prices.js –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫—É!</p>";
                return;
            }

            serviceCategories.forEach((cat, catIdx) => {
                let html = `
                    <div class="mb-4">
                        <button onclick="toggle('cat-${catIdx}')" class="category-btn w-full p-4 rounded-2xl flex justify-between items-center font-bold text-sm uppercase">
                            <span>${cat.name}</span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        <div id="cat-${catIdx}" class="hidden-content px-2 py-4 space-y-4">
                `;

                cat.items.forEach((item) => {
                    html += `
                        <div class="flex justify-between items-center border-b border-white/5 pb-2">
                            <span class="text-[11px] uppercase">${item.name} <br><small class="text-gray-500">${item.price} —Å–æ–º / ${item.unit}</small></span>
                            <input type="number" class="calc-val" data-price="${item.price}" data-name="${item.name}" value="0" oninput="calculate()">
                        </div>
                    `;
                });

                html += `</div></div>`;
                container.innerHTML += html;
            });
        }

        function toggle(id) {
            document.getElementById(id).classList.toggle('active-content');
        }

        function calculate() {
            let total = 0;
            document.querySelectorAll('.calc-val').forEach(input => {
                total += (parseInt(input.value) || 0) * parseInt(input.dataset.price);
            });
            document.getElementById('total').innerText = total;
        }

        function sendToWhatsApp() {
            const total = document.getElementById('total').innerText;
            let text = "üè† *–°–º–µ—Ç–∞ –Ω–∞ —ç–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂ (AKIM.PRO)*\n\n";
            
            document.querySelectorAll('.calc-val').forEach(input => {
                if (parseInt(input.value) > 0) {
                    text += `‚ñ™Ô∏è ${input.dataset.name}: ${input.value} –µ–¥. ‚Äî ${parseInt(input.value) * parseInt(input.dataset.price)} —Å–æ–º\n`;
                }
            });

            text += `\n*–ò–¢–û–ì–û: ${total} —Å–æ–º*\n\n–ö–æ–Ω—Ç–∞–∫—Ç: +996755000228`;
            window.location.href = `https://wa.me/996755000228?text=${encodeURIComponent(text)}`;
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Ç—Ä–∏—Å–æ–≤–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = renderCalc;
    </script>
</body>
</html>
